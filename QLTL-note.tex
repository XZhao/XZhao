\documentclass[12pt]{article}
\usepackage{graphicx}
\usepackage{makeidx}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{color}
\usepackage[all]{xy}
\usepackage{CJK}
%\usepackage{ctex}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\long\def\remove#1{}
\newcommand{\dom}{\mbox{dom}}

\newcommand{\vp}{\varphi}


\newcommand{\coNP}{\mbox{coNP}}

\newcommand{\NP}{\mbox{NP}}
\newcommand{\DP}{\mbox {D}^P}

\newcommand{\LeKl}{\mbox{$\sqcup$ }}
\newcommand{\card}[1]{\mbox{\#}(#1)}

\newcommand{\sss}{\mbox{\bf S}}
\newcommand{\jjj}{\mbox{\bf J}}

\newcommand{\QR}[1]{\mbox{$\ \mid\!\!\!\frac{#1}{\
    \stackrel{\mbox{\scriptsize\it Q-Res}}{\ }\ }\ $}}
\newcommand{\QUR}[1]{\mbox{$\ \mid\!\!\!\frac{#1}{\
    \stackrel{\mbox{\scriptsize\it Q-Pos-Unit-Res}}{\ }\ }\ $}}
%\baselineskip 0.2in


\newcommand{\pbox}{\hbox to 6pt{\leaders\hrule width 6pt height 6pt\hfill}}

\newtheorem{definition}{Definition}
\newtheorem{theorem}{Theorem}
\newtheorem{lemma}{Lemma}
\newtheorem{corollary}{Corollary}
\newtheorem{proposition}{Proposition}
\newenvironment{proof}{\parindent=0pt{\bf Proof: }}{
   \hspace*{\fill}\hbox to 6pt{\leaders\hrule width 6pt height 6pt\hfill}\par}


\pagestyle{plain}

\begin{document}

\begin{CJK*}{GBK}{song}
\CJKtilde



%%%%%%%

\title{
}

\author{
Xishun Zhao \footnote{Corresponding author. Tel: 0086-20-84114036,
Fax:0086-20-84110298.}
%\thanks{This research was partially supported by the NSFC project
%under grant number: 60970040 and a MOE project
%under grant number: 05JJD72040122. }\\
%Institute of Logic and Cognition,
%\\ Sun Yat-sen
%University\\ 510275 Guangzhou, (P.R. China)\\
%{Email: hsszxs@mail.sysu.edu.cn}
}





\maketitle

\begin{abstract}

\end{abstract}
%%%%%%%%%%%%%%%%%%%

%\xymatrix{
%A &*+[F]{\sum_{i=n}^m {i^2}} \\
%   & {\bullet} & D \ar[ul]             }



%%%%%%%%%

{\bf Key words:} \\

Let $Prop$ be the set of all propositional variables.
\vskip 2mm

A model
is a triple
${\cal S}=(S,\mu,\pi)$ such that
\begin{itemize}
\item $S$ is a countable set of symbols representing states.
\item $\mu: \mathbb{N}\rightarrow S$ is a bijection.
\item $\pi: S\rightarrow {\cal P}(Prop)$ is a mapping which induces a propositional assignment of $Prop$ for each state.
\item In many literature, $\mu$ is just written as a sequence $s_0,s_1,\cdots,$.
\end{itemize}


In fact same as following definition\\

A linear-time structure is a mapping $\pi:\mathbb{N}\rightarrow 2^{Prop}$, where $2^{Prop}$ is the power set of $Prop$ which is the set propositional variables. \\

Given $x\in Prop$, two models $\pi_1$ and $\pi_2$. We say $\pi_1$ is an $x$-variant if for any $i\in\mathbb{N}$ we have $\pi_1(i)\setminus\{x\}=\pi_2(i)\setminus\{x\}$.
%i.e. $\pi_1(i)$ and $\pi_2(i)$ differs at most at $y$.

\begin{itemize}
\item $\textsf{X}$ for next ( or $\bigcirc$) .
\item $\textsf{F}$ for future, i.e., eventually holds (or $\lozenge$)
\item $\textsf{U}$ for until
\item $\textsf{U}^-$ for flat until, $A\mathbf{U}^-B$ implicitly means that $A$ is just a propositional formula without temporal operators.

\item $\textsf{F}A$ iff $\top\mathbf{U}A$

\item $\textsf{G}$ (or $\square$) for always hold in the future.
\item $\textsf{G}A$ iff $\neg \textsf{F}\neg A$.
\end{itemize}

Satisfaction Relation
\begin{itemize}
\item $\pi, i\models p$, for $p\in Prop$, iff $p\in \pi(i)$
 \item $\pi, i\models \textsf{X}A$ iff $\pi,i+1\models A$
 \item $\pi,i\models \textsf{F}A$ iff there is $j\geq i$ such that $\pi,j\models A$
 \item $\pi,i\models A\textsf{U} B$ iff there is $j\geq i$ such that $\pi,j\models B$ and $\pi,j'\models A$ for $i\leq j'<j$
\item we write $\pi\models A$ if $\pi,0\models A$.

\item SAT for LTL($\cdots$): determining whether a given formula $A$ in LTL$(\cdots)$ is satisfiable, i.e.,there is a linear-time structure $\pi$ such that $\pi\models A$.

\end{itemize}





\begin{itemize}
\item SAT for LTL$(\textsf{X, F})$ is PSPACE-complete.

\item SAT for LTL$(\textsf{U})$ is PSPACE-complete

\item LTL($\textsf{F}$) is nothing but S4.3Dum (also called S4.3.1 or D)
SAT for S4.3Dum is NP-complete by H. Ono and A. nakamura in 1980 [Studia Logic 39(4), 325-333, 1980]

\item LTL($\textsf{X}$) is KDAlt$_1$. SAT for LTL$(\textsf{X})$ is studied in  P. Y. Schobbens and J.F. Raskin. [The Logic of "initially" and "next": complete axiomatization and complexity. IPL 69(5), 221-225,1999]
\end{itemize}

\begin{itemize}
\item Prop($A)$ is the set of propositional variables occurring in $A$.

\item th$(A)$, the temporal height of $A$, is the maximum number of nested temporal operators.

\item LTL$^k_m(\cdots)$ denotes the class of  formulas $A\in$LTL$(\cdots)$ such that th$(A)\leq k$ and $A$ has at most $m$ variables.
\item Likewise for LTL$^k(\cdots)$ and LTL$_m(\cdots)$.
\item Example $(p\rightarrow \textsf{XF}q)\textsf{U}(\neg\textsf{X}p)\in$LTL$_2^3(\textsf{X,U,F})$
\end{itemize}


Model Checking Problem.

\begin{itemize}
\item A Kripke structure $T=(S, R,\epsilon)$: $S$ is a non-empty set of states; $R\subseteq S\times S$ is a {\em total} relation, i.e., for any $s_1\in S$ there is at leat one $s_2\in S$ such that $s_1Rs_2$; and $\epsilon: S\rightarrow {\cal P}(Prop)$
\item A path in $T$ is an infinite sequence $s_0, s_1,\cdots,$ such that $s_iRs_{i+1}$ for each $i$.

\item A path in $T$, together with $\epsilon$, is nothing but a linear time structure. And inversely, a linear-time structure is a (simple) Kripke structure.

\item path$(T)$ is the set of all pathes in $T$.

\item (Traditionally) $T\models A$ if and only if $\pi\models A$ for all $\pi\in path(T)$.
\item (Traditionaly) $T,s\models A$ iff $\pi\models A$ {\bf for all} $\pi\in path(T)$ starting from $s$.

\item (But this paper) $T,s\models A$ iff $\pi\models A$ {\bf for some} $\pi\in path(T)$ starting from $s$.

\item MC(LTL$(\cdots)$) is the problem of determining whether $T,s\models A$ for a given Kripke structure $T$, a state $s\in T$ and a formula $A\in$ LTL($\cdots$).
\end{itemize}

%%Ö²
Tiling Problem:

\begin{itemize}
\item A set of colors $C=\{c_1,\cdots, c_l\}$.

\item A set of tile type $D\subseteq C^4$. each $d\in D$ has the form $(c_{up},c_{right}, c_{down},c_{left}\}$.

\item A tile is a unit square with a type $d$ (left side colored by $c_{left}$, $\cdots$,). Please note that we can not rotated

\item A region ${\cal R}\subseteq \mathbb{Z}^2$. My understanding, $(i,j)$ represents the grid with vertices $(i,j), (i,j+1), (i+1,j+1), (i+1,j)$.

\item Two grid $(i_1,j_1)$ and $(i_2,j_2)$ are neighboring if they share an edge, that is,  if $$((i_1=i_2)\wedge (|j_1-j_2|=1)) \mbox{xor} ((j_1=j_2)\wedge |i_1-i_2|=1).$$

\item A tiling for a region ${\cal R}$ is a map $t: R\rightarrow D$ such that any two neighboring tiles have matching colors on the shared edge.

\item Informally, $t(i,j)=d$ means that the grid $(i,j)$ is paved by a tile with type $d$.

\item TILING PROBLEM: Instance: $D$ and two colors $c_0, c_1\in C$. Query: does there exists $m$ and a tiling for the region $n\times m$ such that the bottom line of the region is colored with $c_0$, and the top line is colored with $c_1$, here $n=|D|$, i.e., the number of types in $D$. %$n\times m=\{(i,j)\mid i,j=0,\cdots,n-1\}$

\item Tiling Problem is PSPACE-complete, where is the citation?
\end{itemize}

Reduction from tiling problem to MC(LTL).

$D=\{d_1,\cdots, d_n\}$, $C$, $c_0$, $c_1$. Define
$$Prop=\{lmost, rmost, end\}\cup\{x=c\mid x\in\{up, right, down, left\}, c\in C\}$$
%
%
$$\begin{array}{lll}S_D&=&\{s(0), s(n+1), s(e)\}\cup\{s{(d,i)}\mid d\in D, i=1,\cdots,n\}\\

R&=&\{(s(0),s(d,1))\mid d\in D\}\cup\{(s(d,n), s(n+1))\mid d\in D\}\cup\\ &&\{(s(n+1),s(e)), (s(e),s(e))\}\cup\\ && \{(s(d',i),s(d,i+1))\mid d',d\in D, i=1,\cdots,n-1\}\\
\epsilon(s(0))&=&\{lmost\},\\ \epsilon(s(n+1))&=&\{rmost\},\\ \epsilon(s(e))&=&\{end\},\\
\epsilon(s(d,i))&=&\{up=c_{up}, right=c_{right}, down=c_{down}, left=c_{letf}\mid \\ &&\mbox{ if }d=(c_{up}, c_{right}, c_{down}, c_{left}).
\end{array}$$
%
Bottom line has color $c_0$ can be expressed as
$$ \bigwedge_{k=1}^n \textsf{X}^k(down=c_0)$$
Top line should have color $c_1$. %please not we do know where should be the last line,so use \textsf{F}.

$$\textsf{F}\left(lmost\wedge \left(\bigwedge_{k=1}^k \textsf{X}^k(up=c_1)\right)\wedge \textsf{X}^{n+2}end
\right)$$

Neighboring tilts should have matching edges. %note that we put tiles  left-right and bottom-up

$$\textsf{G}\left(\begin{array}{l}
(right=c\rightarrow \textsf{X}(rmost\vee left=c))\wedge\\
(up=c\rightarrow \textsf{X}^{n+2}(end\vee down=c))\end{array}
\right)$$


Theorem: MC(LTL) is PSPACE-hard.
% why membership in PSPACE?

%Given a Kripke structure $T$. let $n=|T|$

%$(T,s)\models^{a} A$

%$(T,s)\models^e A$.

%tautology

Natural Deduction System

$$\vdash\textsf{X}A\vee \textsf{X}\neg A,\ \ \vdash A\textsf{U}\neg A$$

$${B}\vdash {A\textsf{U} B}, \ \ A\wedge (A\textsf{U}B)\vdash \textsf{F}B$$

$$(\textsf{X}^nB)\wedge \left(\bigwedge^{n-1}_{k=0}\textsf{X}^kA\right)\vdash A\textsf{U}B,\ \ n\geq 1, $$ %$\textsf{X}^0A$ is A

$$(\textsf{X}^n(\neg A\wedge\neg B))\wedge \left(\bigwedge^{n-1}_{k=0}\textsf{X}^kA\right)\vdash \neg (A\textsf{U}B),\ \ n\geq 1, $$ %$\textsf{X}^0A$ is A $$


$${A\wedge \textsf{X}(A\textsf{U}B)}\vdash {A\textsf{U}B}$$

$$\textsf{X}(A\circ B)\vdash\dashv \textsf{X}A\circ\textsf{X}B,\ \ \circ\in\{\wedge,\vee\}$$

$$\textsf{F}(A\vee B)\vdash \dashv \textsf{F}A\vee\textsf{F}B$$ % inverse in not true

$$\textsf{F}(A\wedge B)\vdash \dashv \textsf{F}A\wedge\textsf{F}B$$ % inverse in not true

$${A\wedge\textsf{X}A\wedge (A\textsf{U}B)}\vdash {\textsf{X}(A\textsf{U}B)}$$

$${A}\vdash {\textsf{F}A},\ \ {\textsf{X}A}\vdash {\textsf{F}A},\ \ {\textsf{FF}A}\vdash {\textsf{F}A}$$

$$\frac{A\vdash B}{\textsf{X}A\vdash \textsf{X}B},\ \ \frac{A\vdash B}{\textsf{F}A\vdash \textsf{F}B}  $$

$$\frac{A\vdash C, B\vdash D}{(A\textsf{U}B)\vdash (C\textsf{U}D)}$$

$$\frac{\vdash A}{\vdash \textsf{F}A}, \ \ \frac{\vdash A}{\vdash \neg \textsf{F}\neg A},\ \ \frac{\vdash A}{\vdash \textsf{X}^nA},\ \ n\geq 1$$


$$\frac{\textsf{X}\neg A}{\neg \textsf{X}A}$$
\ \\
%%%%%%%%%%complexity

SAT(LTL$_n(H_1,\cdots))\leq_{\text{logs}}\mbox{MC(LTL}_n(H_1,\cdots))$

Consider $\varphi\in$ LTL$_n(\cdots)$ s.t.Prop$(\varphi)\subseteq\{A_1,\cdots, A_n)$.

Define $T:=(N, R, \epsilon)$

\begin{itemize}
\item $N=$ Pow$(\{A_1,\cdots, A_n\})$

\item $R$ is the full relation, i.e. $N\times N$.

\item $\epsilon(s)$ is the valuation determined by $s$.
\end{itemize}

$\varphi$ is SAT  $\Longleftrightarrow$ $\exists s\in N$ s.t. $T,s\models \varphi$. Pick some $s_0$ we have

$$(\exists s\in N,\ T,s\models \varphi) \Longleftrightarrow T,s_0\models \textsf{X}\varphi\Longleftrightarrow T,s_0\models\textsf{F}\varphi$$


MC(LTL($\cdots))\leq_{\text{logs}}$ MC(LTL$_2(\textsf{U}))$
%%%proof

Consider an arbitrary structure $T(N,R,\epsilon)$ and a formula $\varphi\in$ LTL$(\cdots)$. Suppose $varphi$ contains $n$ propositional atoms $P_1,\cdots, P_n$.
We shall define a new structure $D_n(T):=(N',R',\epsilon')$ over $\{A,B\}$.

$$\begin{array}{l}
N':=\{(s,i)\mid s\in N, 1\leq i\leq 2n+2\}\\

(s,i)R'(t,j) \Longleftrightarrow\left\{\begin{array}{l}
s=t \mbox{ and } j=i+1, \mbox{ or }\\
sRt \mbox{ and } i=2n+2, j=1
\end{array}\right.\\
\epsilon'((s,1)):=\{A,B\}\\
\epsilon((s,2))=\{\ \}\\
\epsilon((s,2i+1))=\{A\}\\
\epsilon((s,2i+2))=\left\{\begin{array}{ll}
\{B\} & \mbox{if } Pi\in \epsilon(s)\\
\{\ \} & \mbox{otherwise}
\end{array}\right.
\end{array}
$$

$(s,2i+1), s(s,2i+2)$ together encode the truth of $P_i$ in $\epsilon(s)$.
%
$A, \neg B$ always hold in $(s,2i+1)$. $\neg A$ always holds in $(s,2i+2)$. Whether $B$ holds in $(s,2i+2)$ depends whether $P_i$ holds in $s$. \\


Let $At_D$ be $A\wedge B$. Define

$$\begin{array}{l}
Alt^0_n:=At_D=A\wedge B\\
Alt^1_n:=\neg B\wedge A\wedge\left(A\textsf{U}^-\left(\neg A\wedge\left(\neg A\textsf{U}^-Alt_n^0\right)\right)\right)\\
Alt^{k+1}_n:=\neg B\wedge A\wedge\left(A\textsf{U}^-\left(\neg A\wedge\left(\neg A\textsf{U}^-Alt_n^k\right)\right)\right)
\end{array}$$
%
For $k\geq 1$, $Alt^k_n$ means there remain exactly $k$ many ``$A-\neg A$" alternations before the next state satisfying $A\wedge B$.\\

Define $D_n(\varphi)$ inductively.

$$\begin{array}{l}
D_n(P_i):=A\textsf{U}^-\left(\neg At_D\wedge \neg At_D\textsf{U}^-\left(Alt^{n+1-i}_n\wedge (A\textsf{U}^-B)\right)\right)\\
D(\neg \varphi)=\neg D_n(\varphi)\\
D_n(\varphi\wedge\psi):=D_n(\varphi)\wedge D_n(\psi)\\
D_n(\textsf{X}\varphi):=At_D\textsf{U}^-\left(\neg A\wedge\neg B\wedge\left(
\neg At_D\textsf{U}^-(At_D\wedge D_n(\varphi)\right)\right)\\
D_n(\textsf{F}\varphi):=F(At_D\wedge D_n(\varphi))\\
D_n(\varphi\textsf{U}^-\psi):=(At_D\rightarrow D_n(\varphi))\textsf{U}(At_D\wedge D_n(\psi))
\end{array}$$
%
\color{red} Model checking for LTL$_2(\textsf{U}^-)$ is PSPACE-complete since MC(LTL$(\textsf{X,F}))$ is PSPACE-complete.
\color{black}

\ \\

MC(LTL$(\cdots))\leq_{\text{logs}} \mbox{MC(LTL}_1(\textsf{X},\cdots))$.

%%%%%%%%proof

Given a Kripke structure $T=(N,R,\epsilon)$ and a formula $\varphi\in \mbox{ LTL}(\cdots)$ with propositions $P_1,\cdots, P_n$. Define $C_n:=(N',R',\epsilon')$ as follows.

$$\begin{array}{l}
N':=\{(s,i)\mid s\in N, 1\leq i\leq 2n+2\}\\

(s,i)R'(t,j) \Longleftrightarrow \left(\begin{array}{l} s=t, j=i+1, \mbox{ or}\\
                                 sRt, i=2n+2, j=1
\end{array}\right)\\

\epsilon'((s,1))=\epsilon'(s,2):=\{A\}\\

\epsilon'((s,2i+1)):=\{ \ \}\\

\epsilon'((s,2i+2)):=\left\{\begin{array}{ll}
\{A\} & \mbox{ if }P_i\in \epsilon(s)\\
\{\ \} & \mbox{ otherwise }
\end{array}\right.
\end{array}
$$
%
For $i\geq 1$, we use truth values of $A$ in $(s,2i+1)$ and $(s,2i+2)$ to encode the truth of $P_i$ in $s$. $\neg A-\neg A$ means $\neg P_i$, and $\neg A-A$ means $P_i$. That is, $A$ never holds in $(s,2i+1)$.

Let $At_C:=A\wedge\textsf{X}A\wedge \textsf{X}^2\neg A$. Define

$$\begin{array}{l}
C_n(P_i):=\textsf{X}^{2i+1}A \\
C_n(\neg \varphi):=\neg C_n(\varphi) \\
C_n(\varphi\wedge\psi):=C_n(\varphi)\wedge C_n(\psi) \\
C_n(\textsf{X}\varphi):=\textsf{X}^{2n+2}C_n(\varphi)\\
C_n(\textsf{F}\varphi):=\textsf{F}(At_C\wedge C_n(\varphi))\\
C_n(\varphi\textsf{U}\psi):=
(At_C\rightarrow C_n(\varphi))\textsf{U}(At_C\wedge C_n(\psi))
\end{array}
$$
We have $$ (T,s\models \varphi)\Longleftrightarrow (C_n(T), (s,1)\models C_n(\varphi))$$
%
\color{red}
Model checking for LTL$_1(\textsf{X,F}))$ is PSPACE-complete.
\color{black}


We have the similar results for SAT.

MC(LTL$(\cdots))\leq_{\text{logs}} \mbox{MC(LTL}_1(\textsf{X},\cdots))$.

MC(LTL($\cdots))\leq_{\text{logs}}$ MC(LTL$_2(\textsf{U}))$

SAT(LTL$_2(\textsf{U}))$ is PSPACE-complete

SAT(LTL$_1(\textsf{X,F}))$ is PSPACE-complete \\


%%%%%% NP-hardness

SAT$\leq_{\text{logs}}$ LTL$_2(\textsf{F})$


We say a model $S$ has $n$ $A$-alternatons if and only if
there exist positions $0=i_1<i'_1<i_2<i'_2<\cdots<i_{n+1}<i'_{n+1}=\omega$
such that

$S,j\models \neg A$ if and only if $i'_k\leq j<i_{i+1}$.

1 $A$-alternation: it is the patten $(A\cdot\neg A)\cdot AAAA\cdots$

2 $A$-alter: $(A\cdot\neg A\cdot A\cdot\neg A)\cdot AAAAA\cdots$.


Define

$$\begin{array}{l}
\varphi_0:=\textsf{G}(\neg A\vee \textsf{G}A)\wedge \textsf{F}A\\

\theta_0(\varphi):=\top\\

\theta_1[\varphi]:=A\wedge \textsf{F}(\neg A\wedge \varphi)\\

\theta_{i+1}:=\theta_1[\textsf{F}\theta_i[\varphi]]=A
\wedge \textsf{F}(\neg A\wedge \textsf{F}\theta_i[\varphi]), \mbox{ for }i\geq 1

\end{array}
$$

$$\theta_1(\varphi_0)=A\wedge \textsf{F}(\neg A\wedge\varphi_0)=A\wedge\textsf{F}(\neg A\wedge (\textsf{G}(\neg A\vee \textsf{G}A)\wedge \textsf{F}A))$$
means $S$ has $k$ $A$-alternation for some $k\geq 1$.

$$\theta_2(\varphi_0):=A\wedge \textsf{F}(\neg A\wedge \textsf{F}\theta_1[\varphi_0])$$
means $S$ has $k$ $A$-alternations for some $k\geq$.

Generally, $\theta_n[\varphi_0]$ means $S$ has $k$ $A$-alternations for some $k\geq n$. Then

$$\mbox{AL}_n:=\theta_n[\varphi_0]\wedge\neg\theta_{n+1}[\varphi_0]$$
means that $S$ has exactly $n$ $A$-alternations.



An $A$-alternation is like $A\cdots\neg A$.

Genrally, $\theta_n[\psi]$ means that ...

Suppose $S$ has exactly $n$ $A$ alternations. we can view it as the encoding of a valuation $v_S$ of $\{P_1,\cdots,P_n\}$ by saying that $P_k$ holds if and only if $B$ and $\neg B$ can be found in the $K$-th $\neg A$ segment.

Now we can encode a propositional formula $\psi$ over $\{P_1,\cdots, P_n\}$ into $f_n(\psi$, an LTL$(\textsf{F})$ formula with

$$\begin{array}{l}f_n(P_i):=\theta_i(B\wedge \textsf{F}\theta_{n-i}[\varphi_0]]\wedge \theta_i[\neg B\wedge \theta_{n-i}[\varphi_0]]\\

f_n(\neg \psi):=\neg f_n(\psi)\\

f_n(\psi_1\wedge\psi_2):=f_n(\psi_1)\wedge f_n(\psi_2)

\end{array}$$


We can see $\psi$ is SAT iff $f_n(\psi)\wedge\mbox{AL}_n$ is SAT
\\ \ \\
%%%%%%%%%%%%%%%%

3SAT$\leq_{\text{logs}}\mbox{ MC(LTL}2(\textsf{F}))$


Consider a 3CNF formula $\theta:=C_1\wedge\cdots\wedge C_m$. and each $C_i:=L_{i,1}\vee L_{i,2}\vee L_{i,3}$

The variables of $\theta$ is $X:=\{x_1,\cdots, x_n\}$. and var$(L_{i,j})=x_{r(i,j)}$.

Define $T_n=(N,R,\epsilon)$ as follows

$N:=\{s_0, s_1,s_2,\cdots s_n\}\cup\{t_1, u_1\cdots t_n, u_n\}$

$s_iR t_{i+1}, s_iRu_{i+1}, \ i=0,1,2,\cdots,n-1$

$s_n R s_n$

$t_iR s_{i}, u_{i}R s_{i}, \ \i=1,2,\cdots,n$


$\epsilon(s_i)=\{ \ \}, \ i=0,1,2,\cdots,n$

$\epsilon(t_i)=\{A\},\ i=1,2,\cdots,n$

$\epsilon(u_i)=\{B\}, \ i=1,2,\cdots,n$
%%%
\ \\

In $T_n$ a path $\pi$ from $s_0$ can encode a valuation $v_S:X\rightarrow\{0,1\}$: $v_s(x_r)=1$ if and only if $\pi$ passes $t_r$. \\

Define $$\varphi_i^{n+1}:=\neg \textsf{F}(A\vee B)$$
And for $r=1,\cdots,n$, defined inductively

$$\varphi^r_i:=\left\{
\begin{array}{ll}
\neg(A\vee B)\wedge \textsf{F}(B\wedge\textsf{F}\varphi_i^{r+1}) & \mbox{if }x_r\in C_i\\
\neg(A\vee B)\wedge \textsf{F}(A\wedge\textsf{F}\varphi_i^{r+1}) & \mbox{if }\neg x_r\in C_i\\
\neg(A\vee B)\wedge \textsf{F}((A\vee B)\wedge\textsf{F}\varphi_i^{r+1}) & \mbox{otherwise}
\end{array}\right.
$$

$$\pi\models\varphi^1_i\Longleftrightarrow v_S\not\models C_i$$

\ \\

MC(LTL$_2(\textsf{F}))$ and SAT(LTL$_2(\textsf{F}))$ are NP-complete.


%%%%%% fragment with only one proposition

Wrt equivalence mudulo stuttering, a model with one has one of the following patterns for some $n\geq 1$.

$$\begin{array}{lll}
S^n_1:=(A\cdot \neg A)^n\cdot A^{\omega}, & S^n_2:=\neg A\cdot (A\cdot\neg A)^n\cdot A^n, & S_3:=(A\cdot\neg A)^\omega,\\

S^n_4:=(\neg A\cdot A)^n\cdot (\neg A)^{\omega}, & S^n_5:=A\cdot (\neg A\cdot A)^n\cdot (\neg A)^n, & S_6:=(\neg A\cdot A)^\omega
\end{array}
$$

Lemma: For $\varphi\in $ LTL$_1(\textsf{U,X})$ with $n=$ th$(\varphi)$,

$$S^{n+1}_i\models \varphi \Longleftrightarrow S_i^n\models\varphi$$


We can prove the lemma simultaneously for $i=1,\cdots,6$ by induction on $n$.

$n=0$. clearly it is true.

Suppose the assertion is true for $n$

$\varphi=\textsf{X}\psi$.

$$S_1^{n+2}\models \varphi\Longleftrightarrow \left(
\begin{array}{l}
S_1^{n+2}\models \psi, \mbox{ or}\\
S_2^{n+1}\models \psi
\end{array}
\right)\Longleftrightarrow \left(\begin{array}{l}
S_1^{n+1}\models \psi, \mbox{ or}\\
S_2^{n}\models \psi
\end{array}
\right)\Longleftrightarrow S_1^{n+1}\models \varphi$$

For other proof, similar.\\



%%%%%%%%%%%%%%%2012-10-17
\ \\ \ \\

Non-deterministic finite $\omega$-automata

$$M=(Q,\Sigma,\delta,q_0, Acc)$$


\begin{enumerate}
\item \
\item \
\item $\delta:Q\times\Sigma\rightarrow\mbox{Pow}(Q)$ transition function
\item \
\item $Acc$ acceptance component given as.
\begin{itemize}
\item $F\subseteq Q$, or
\item ${\cal F}\subseteq\mbox{Pow}(Q)$, or
\item $\Omega=\{(E_i,F_i)\mid E_i, F_i\subseteq Q, i=1,\cdots,n\}$
\end{itemize}
\end{enumerate}

A run of $M$ on $\alpha=a_1a_2\cdots\in\Sigma^{\omega}$ is an infinite sequence of states $\mathbf{r}=r_0r_1r_2\cdots\in Q^{\omega}$ such that

$r_0=q_0$

$r_{i+1}\in \delta(q_i,a_{i+1})$
\ \\

%%%buchi

B\"{u}chi automata $M=(Q,\Sigma,\delta, q_0, F)$ with $F\subseteq Q$.

We say $M$ accept $\alpha$  iff there is a run $\mathbf{r}$ of $M$ on $\alpha$ such that there is a state $q\in F$ such that it occurs in $\mathbf{r}$ infinitely often.

$$L(M):=\{\alpha\mid M \mbox{ accept } \alpha\}$$

is called the language recognized by $M$.

A $\omega$-language) $A\subseteq \Sigma^{\omega}$ is called regular if there is a B\"{u}chi automata $M$ such that $A=L(M)$.



\begin{enumerate}
\item If $A\subseteq\Sigma^*$ is a regular language then $A^{\omega}$ is a regular $\omega$-language.

\item (B\"{u}chi Characterization Theorem) Every regular $\omega$-language $A$ is of the form $$A=\bigcup_{i=1}^nA_iB_i^{\omega}$$
where $A_i, B_i\subseteq \Sigma^*$ are regular languages.
\end{enumerate}
\ \\
%%%%%%%%%%%%%%%%%%%%%%%%%%

Lemma: For $i=1,\cdots,6$, and $n$, there is a B\"{u}chi automaton ${\cal A}_i^{=n}$ and B\"{u}chi automaton ${\cal A}^{\geq n}_i$ such that
\begin{itemize}
\item ${\cal A}_i^{=n}$ accepts a model $S$ iff $S$ is equivalent to $S^n_i$ modulo stuttering
\item ${\cal A}^{\geq n}_i$ accepts a model $S$ iff $S$ is equivalent to $S^m_i$ for some $m\geq n$.
\end{itemize}
\ \\

{\bf Non-empty Problem:} Determining whether a B\"{u}chi automaton accepts at least one infinite word.

For a Buchi automaton $M$, 
\begin{itemize}
\item a state $t$ is {\bf reachable} from a state $s$ if there is a finite word $w=w_1\cdots w_k$ and a finite sequence $s_0,\cdots, s_k$ of sates in $S$ such that $s_0=s, s_k=t$ and $s_{i+1}\in \delta(s_i,w_{i+1})$ for $0\leq i\leq k-1$.  
    
\item $M$ accepts some word iff $M$ contains an accepting state that is reachable from some initial state and is reachable from itself. 

\item The non-emptiness problem for Buchi automata is logspace-complete for NLOGSPACE.

\end{itemize}

Let $M_1,\cdots, M_k$ be Buchi automata, then $L(M_1)\cap\cdots\cap L(M_k)$ can be recognized by a Buchi automata with not more than $k\Pi^k_{i=1}|M_i|$ states. 

Let 
$M_i:=(\Sigma, Q^i, Q^i_0,\delta^i, F^i)$. 

Define $M=(\sigma, Q, Q_0, \delta, F)$ as follows:

\begin{itemize}
\item $Q:=Q^1\times\cdots\times Q_k\times\{1,\cdots,k\}$
\item $Q_0:=Q_0^1\times\cdots\times Q_0^k\times\{1\}$
\item $F:=F^1\times Q^2\times\cdots\times Q^k\times\{1\}$
\item $(q^1,\cdots, q^k, j)\in \delta ((s^1,\cdots, s^k,i),a)$ iff $q^l\in \delta^l(s^l,a)$ for all $l\in\{1,\cdots,k\}$ and 
(either ($q^i\not\in F^i$ and $i=j$) or ($q^i\in F^i$ and $j=i+1$ mod $k$))
\end{itemize}


Subword Automaton $A$ is a tuple $(\Sigma, S, \rho, \xi, F)$, where 

\begin{itemize}
\item $\sigma$, $S$, $\rho$ $F$ as usual.
\item $\xi:\Sigma\rightarrow S$ is a labelling function 
\item An infinite word $w\in \Sigma^{\omega}$ is accepted by $A$ if the following two conditions hold:
\begin{enumerate}
\item Labelling condition: $\xi(w_{i+1})\in \rho(\xi(w_i),w_i)$ for every $i\in \omega$,
\item Subword condition: for every $i\in\omega$, there is some $j\geq i$ and a mapping $\varphi[i,j]\rightarrow S$ such that $\varphi(i)=\xi(i)$, $\varphi(j)\in F$, and for each $i\leq k<j$, $\varphi(k+1)\in \rho(\varphi(k),w_k)$.
\end{enumerate}
\end{itemize}

Every subword automaton can be transformed to a Buchi automaton with quadratic states.\\



A set-subword automaton $A$ is a pair $(\Psi,\rho)$ where 

\begin{itemize}
\item $\Psi$ is a finite set of symbols which are formulas of a logic
\item $2^{\Psi}$, the power set of $\Psi$, serves both as the alphabet and the set of states. That is, $\Sigma=2^{\Psi}$ and $S=2^{\Psi}$. 

\item $\rho: \Sigma\times S\rightarrow 2^S$ such that 

\begin{enumerate}
\item $\rho(s,a)\not=\emptyset$ iff $s\subseteq a$
\item $\emptyset\in\rho(\emptyset,a)$
\item if $s\subseteq s'$, $s_1\subseteq s'_1$ and $s_1\in\rho(s',a)$ then $s'_1\in \rho(s,a)$
\item if $s'_1\in \rho(s_1,a)$ and $s'_2\in\rho(s_2,a)$ then $s'_1\cup s'_2\in \rho(s_1\cup s_2,a)$ 
\end{enumerate} 
\item a word $w$ is accepted by $A$ if for every $i\in\omega$ and every (formula) $f\in w_i$ there is a finite interval $[i,j]$ and a mapping $\varphi:[i,j]\rightarrow S$ such that 

\begin{enumerate}
\item $\varphi(i)=\{f\}$,
\item $\varphi(j)=\emptyset$,
\item for all $i\leq k<j$, $\varphi(k+1)\in \rho(\varphi(k), w_k)$.
\end{enumerate}





\end{itemize}

\ \\
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Theorem: Molde checking for LTL$^\omega_1(\textsf{U}))$ is PTIME solvable.

input Kripke structure $T=(N,R,\epsilon)$ and some state $s_0\in N$ and a formula $\varphi\in $ LTL$_1(\textsf{U})$.

$$T,s_0\models \varphi  \Longleftrightarrow \exists i,n \mbox{ such that }S_i^n\models \varphi \mbox{ and }\exists \mbox{ a path $S$ from $s_0$ s. t. }S\approx S^n_i$$

We need to check whether $T$ contains such a path in polynomial time. We consider all $S^k_i$ for $k<$ th$(\varphi)$. $S^k_i\models \varphi$ can be checked in time $O(k|\varphi|)$. $\exists $ a path from $s_0$ equivalent to $S^k_i$ can be ckecked in time $O(k|T|)$. We need consider $k=$ th$(\varphi)$. We need to check whether exists a path from $s_0$ equivalent $S^k_i$ or equivalent to $S^{k+m}_i$ for some $m$. Then check $S^k_i\models\varphi$.\\


%%%%%%%%%%%%LTL_1(X)

SAT for LTL$(\textsf{X})$ is in NP. For $\varphi$ in LTL$(X)$ with temporal height $k$.  It is eough to guess the first $k$ states of a candidate model $S$.

MC for LTL$(\textsf{X})$ is also in NP for the same reason.


SAT for LTL$_1(\textsf{X})$ is NP-hard.

We use the states $s_1,\cdots, s_n$ to encode a truth assignmment on propositional atoms $P_1,\dots, P_n$. More precisely, for $i=1,\cdots, n$, the truth of $A$ in $s_i$ is the truth of $P_i$.

For a propositional formula $\varphi$ over $\{P_1,\cdots, P_n\}$ replace each $P_i$ by $X^iA$. The rsulting formula is SAT iff $\varphi$ is.\\


%%%%%%%%%%%%%%% LTL^k_n(U,X)


For fixed $k,n$, SAT for LTL$_n^k(\textsf{U,X})$ is in LOGSPACE

Clealy, LTL$^0_n$ has only finitely many formuals. Consider CNF formulas.

$J_n^0$ be the CNF formulas of LTL$^0_n$

For $J_n^{k+1}$ first consider
%
$$J_n^k\cup\{\textsf{X}\theta\mid \theta\in J_n^k\}\cup\{\theta\textsf{U}\theta'\mid \theta,\theta'\in J^k_n\}$$

$J_n^{k+1}$ is nothing but the set of CNF formulas constructed from formulas in the above set which are consider atoms.


Clearly, $J_n^k$ can be considered in a fixed time.

For a formula $\varphi$ compute its representitive in $J^k_n$ can be done in LOGSPACE.


$\varphi$ is SAT if its representive is not $\bot$.
\\


For fixed $n,k$, model checking for LTL$_n^k(\textsf{U,X})$ is in NLOGSPACE


checking whether $T,s\models \varphi$ can be done in nondeterminsitic space.
\\ \ \\


%%%%%%%%%% QBF to MC(LTL(X,F))



$$\Phi:=Q_1x_1\cdots Q_n\bigwedge_{i=1}^m \left(L_{i,1}\vee L_{i,2}\vee L_{i,3}\right)$$

Define $T_{\Phi}:(N,R,\epsilon)$ as follows.


$$\begin{array}{ll}N:=&
\{s_0, s_1,\cdots, s_n; t_1,s_1,\cdots, t_n,s_n; w_1,\cdots, w_m\}\cup\\ & \{v_{i,j}\mid 1\leq i\leq m, j=1,2,3\}\end{array}$$


$s_iR t_{i+1}, s_iRu_{i+1}$, for $i=0,\cdots,n-1$

$s_nR v_{1,j}, v_{i,j}Rw_i, w_iRv_{i+1,j}$ for $i=1,\cdots,m-1$,

$w_mRs_0$ \\


Propositions

$$\{x_1^F, x_1^T, \cdots, x_n^F, x_n^T, L_1^j,\cdots, L_m^j\}$$


$\frac{x}{y}$

\section{QLTL}

If $A\in$ QLTL($\cdots$), $x$ is a propositional atom,  then so are
$\exists x A$ and $\forall xA$.\\


Recall a linear time structure is a map $\pi:\mathbb{N}\rightarrow 2^{Prop}$

Two linear time structures
$\pi_1,\pi_2$ are $X$-variant if for any $i$, $\pi_1(i)$ and $\pi_2(i)$ agree on atoms not in $X$.
Here $X$ is a set of atoms.\\


Satisfaction Relation
\begin{itemize}
\item $\pi, i\models p$, for $p\in Prop$, iff $p\in \pi(i)$
 \item $\pi, i\models \textsf{X}A$ iff $\pi,i+1\models A$
 \item $\pi,i\models \textsf{F}A$ iff there is $j\geq i$ such that $\pi,j\models A$
 \item $\pi,i\models A\textsf{U} B$ iff there is $j\geq i$ such that $\pi,j\models B$ and $\pi,j'\models A$ for $i\leq j'<j$

\item $\pi,i\models \forall x A$ iff $\pi',i\models A$ for all $x$-variant $\pi'$ of $\pi$.
\item $\pi,i\models \exists x A$ iff $\pi',i\models A$ for some $x$-variant $\pi'$ of $\pi$.
\item we write $\pi\models A$ if $\pi,0\models A$.
\item SAT for QLTL($\cdots$): determining whether a given formula $A$ in QLTL$(\cdots)$ is satisfiable, i.e.,there is a linear-time structure $\pi$ such that $\pi\models A$.
\item VAL for QLTL($\cdots$): determining whether a given formula $A$ in QLTL$(\cdots)$ is valid, i.e., $\pi\models A$ for any linear-time structure $\pi$.
\end{itemize}

$\textsf{U}$ can be defined by $\textsf{F}$ and $\exists$ in QLTL as follows

$$A\textsf{U}B \Longleftrightarrow \textsf{F}B\wedge \exists z(z\wedge \textsf{G}(z\rightarrow (B\vee (A\wedge \textsf{X}z))))$$










\end{CJK*}

\end{document}
