\documentclass[12pt]{article}
\usepackage{graphicx}
\usepackage{makeidx}
\usepackage{amsmath}
\usepackage{amsfonts}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\long\def\remove#1{}
\newcommand{\dom}{\mbox{dom}}

\newcommand{\vp}{\varphi}


\newcommand{\coNP}{\mbox{coNP}}

\newcommand{\NP}{\mbox{NP}}
\newcommand{\DP}{\mbox {D}^P}

\newcommand{\LeKl}{\mbox{$\sqcup$ }}
\newcommand{\card}[1]{\mbox{\#}(#1)}

\newcommand{\sss}{\mbox{\bf S}}
\newcommand{\jjj}{\mbox{\bf J}}

\newcommand{\QR}[1]{\mbox{$\ \mid\!\!\!\frac{#1}{\
    \stackrel{\mbox{\scriptsize\it Q-Res}}{\ }\ }\ $}}
\newcommand{\QUR}[1]{\mbox{$\ \mid\!\!\!\frac{#1}{\
    \stackrel{\mbox{\scriptsize\it Q-Pos-Unit-Res}}{\ }\ }\ $}}
%\baselineskip 0.2in

\newcommand{\AK}{\mbox{${\cal{A}}_K$}}

\newcommand{\pbox}{\hbox to 6pt{\leaders\hrule width 6pt height 6pt\hfill}}

\newtheorem{definition}{Definition}[section]
\newtheorem{theorem}{Theorem}[section]
\newtheorem{lemma}{Lemma}[section]
\newtheorem{corollary}{Corollary}[section]
\newtheorem{proposition}{Proposition}[section]
\newtheorem{example}{Example}[section]
\newtheorem{remark}{Remark}[section]
\newenvironment{proof}{\parindent=0pt{\bf Proof: }}{
   \hspace*{\fill}\hbox to 6pt{\leaders\hrule width 6pt height 6pt\hfill}\par}


\pagestyle{plain}

\begin{document}



\section{General Problems}


Configuration and Specification (Sets)\\ \ \\

{\bf Equivalence Configuration Problem}\\

Input: $C=\{\alpha_1,\cdots,\alpha_n\}$

Query: Whether $\exists K\subseteq C: K\equiv \beta$\\

Let
$$\mbox{IMP}(C,\beta):=\{\alpha\mid \alpha\in C \mbox{ and }\beta\models \alpha\}$$
Then
$$\exists K\subseteq  C(K\equiv \beta)\Longleftrightarrow\mbox{IMP}(C,\beta)\models \beta$$

So, equivalence problem is in P$^{\textbf{NP}[\text{log} n]}$ which is the class of problems solvable in polynomial time with $O(\text{log}n)$ queries to an NP oracle.\\

Next we show hardness. The problem SAT$^n_{\text{odd}}$ is complete for P$^{\textbf{NP}[\text{log} n]}$. Where SAT$^n_{\text{odd}}$ is the problem of determining whether the number of satisfiable formulas among $n$ given CNF formulas.

We shall construct a reduction from SAT$^n_{\text{odd}}$ to the equivalence configuration problem. 

Suppose $F_1,\cdots, F_n$ are 3CNF formulas such that they have pairwisely distinct vaiables. We assume $F_i$ is not tautolodical, otherwise we consider $F_i\wedge p_i$. 
 
 
It is easy to see that $\varphi$ is satsfiable iff the number of satisfiable formulas among $F_1,\cdots, F_n$ is odd.  


Please note that there is transformation $T$ such that a 3CNF formula $F$ is satisfiable iff $T(F)$ is minimal unsatisfiable. 

Now we have $T(F_1),\cdots, T(F_n)$, and suppose they have $m_1,\cdots, m_n$ clauses, repectively.

By the definition of transformation $T$, in each $T(F_i)$ we have a clause $c_i=(y_{i,1}\vee \cdots\vee y_{i,m_i})$, where $y_{i,j}$ are introduced new variables by $T$.

Now we can see $F_i$ is satisfiable iff $T(F_i)-\{c_i\}$ is satisfiable and equivalent to $\neg c_i\wedge F_i$ are equivalent.

Let $T'(F_i):=(T(F_i)-\{c_i\})\vee_{cl} c_i$

Let $C:=\{T'(F_1), \cdots, T'(F_n), c_1, \cdots, c_n\}$.


Let $\beta:=( c_1\vee F_1)\wedge\cdots\wedge (c_n\vee F_n)\wedge (\neg c_1\otimes \cdots \otimes \neg c_n)$


Suppose there are odd number of sat frmulas. For simplicility, we assume $F_1, \cdots, F_{2k+1}$ are sat, while others are unsat. 

Let $K=\{T'(F_i),\cdots, T'(F_n)\}$, 



\ \\

{\bf Retricted Equivalence Configuration}(R-equivalence)\\

Input: $C=\{\alpha_1,\cdots,\alpha_n\}$, $\beta$, and a set $V$ of variables

Query: Whether $\exists K\subseteq C: K\equiv^V \beta$\\ 



the problem of determining whether $F\equiv_V G$  is in $\Pi_2^P$ (for the complementary problem: we guess a clause $\gamma$ over $V$, check that $G\models \gamma$ but $F\not\models \gamma$. 

Thus, R-equivalence configuraton is $\Sigma_3^P$ (guess a $K\subseteq C$, theck that it is satisfiable and $K\equiv_V \beta$.) \\


Next we show the hardness.

Consider $\Phi:=\exists \vec{x}\forall\vec{y}\exists \vec{z} \varphi$ where $\varphi$ is a CNF formula. We assume w.l.o.g. that $\varphi$ contains clauses non-tautological calss over $\vec{z}$ (otherwise, we pick new varaiable $z'$ and consider $\exists\vec{x}\forall\vec{y}\exists\vec{z}\exists z'(\varphi\wedge z'$)

$\varphi$ be written as $(c'_1\vee c''_1)\wedge (c'_n\vee c''_n)$ in which $c'_i$ is clause over $\vec{x}$.

Pick a new variable $w_1, \cdots, w_n,w$. Let 

Let $$\psi:= \left(\bigwedge_{i=1}^n (c'_i\rightarrow w_i)\right)\wedge 
\left(\bigwedge_{i=1}^n(\neg c'_i\wedge \neg c''_i\rightarrow \neg w_i)\right)$$

Let $$C_0:=\{\psi\wedge  (c''_1\rightarrow w_1) , \cdots, \psi\wedge (c''_n\rightarrow w_n)\}$$

$$C_1=\{c'_1, \neg c'_1,\cdots, c'_n, \neg c'_n\}$$

$$C_2=\{x_1,\neg x_1\cdots, x_n,\neg x_n\}$$

$$C_3=\{(w_1\wedge\cdots\wedge w_n\rightarrow w), (w\rightarrow (c'_1\vee c''_1)\wedge\cdots\wedge (c'_n\vee c''_n))\}$$

Now let $$C:=C_0\cup C_1\cup C_2\cup C_3\cup\{w\}$$

Let $\beta$ be $$ w_1\wedge\cdots\wedge w_n\wedge w$$

Let $V:=\vec{y}\cup\{w_1,\cdots,w_n,\}\cup\{w\}$\\


Claim: Suppose $K\subseteq C$ satisfiable, $c_i\not \in K$ and $K\not\models c_i$, then 
$K\cup\{\neg c_i, \psi\wedge (c''_i\rightarrow w_i)\}$ is still satisfiable.


(Lemma: $F\models_V G$ iff for for any truth assignment $t$ on $V$, if it can be extended to a satisfying truth assignment for $F$, it can be extended to an satisfying truth assignment for $G$. 
) \\

We shall show $\Phi$ is true if and only if there is satisfiable $K\subseteq C$ s.t. $K\equiv_V \beta$\\



From right to left:
Given a such $K\equiv_V \beta$. it must be that $w\in K$. 

Let $K*\superseteq K$ such that for any $c'_i$, if $c'_i\not\in K$ then $K*\models c'_i$. Then $K^*\models_V \beta$. Then we can show $\Phi$ is true.\\

From left to right.






\ \ \\

{\bf Implication Problem}\\

Input: $C=\{\alpha_1,\cdots,\alpha_n\}$, $\beta$

Query: Whether $\exists K\subseteq C: K\models \beta$\\ 

Clearly in $\Sigma_2^P$. We shall the hardness

Consider $\Phi=\exists x_1,\cdots, x_n\forall y_1,\cdots,y_m \varphi$ where $\varphi$ is a DNF formula. Pick a new varibale $z$.

Let $C:=\{\varphi\rightarrow z, x_1,\neg x_1,\cdots, x_n,\neg x_n\}$, $\beta:=z$

Clearly, $\Phi$ is true if and only if $\exists K\subseteq C$ such that $K\models \beta$.


\ \\ 

Note: In all problems $K$ is demanded satisfiable.

$$\alpha \equiv_V \beta \Longleftrightarrow \forall \gamma \mbox{ over } V, (\alpha\models \gamma \Leftrightarrow \beta\models \gamma) $$

$$\alpha \models_V \beta \Longleftrightarrow \forall \gamma \mbox{ over } V, (\beta\models \gamma \Longrightarrow \alpha\models \gamma) $$


%%%%%%%

Euivalence Problem is in P$^{\text{NP}[\text{log}n]}$

R-Equivalence Problem same as above

Implication  $\Sigma_2^P$?





%%%%%%%%%%%%%%%%%%%%%%%%%%%


\section{Resticted to DHORN}

$C$: set of DHORN, $\beta$: DHORN \\

{\bf Equivalence problem is in PTIME} \\

Idea: Let 



%%%

\ \\

{\bf Implication problem is trivial} \\ 

The existence of $K$ is equivalent to $C\models\beta$\\

\ \\


{\bf The $V$-equivalence problem}\\

%IMP$(C,\beta,V):=\{\alpha\in C\mid \beta\models_V \alpha\}$\\

%The existence of $K\equiv_V \beta$ is equivalent to IMP$(C,\beta, V)\equiv_V\beta$.\\

we guess it seems $\Sigma_2^P$-complete.

See Hans's book page 251


\section{Restricted to HORN}


Equivalence Problem: same as the DHORN case (PTIME).\\

iff IMP$(C,\beta)$ is satisfiable and IMP($C,\beta)\models \beta$\\ 

\ \\

V-Equivalence Problem:  $\Sigma_2^P$-complete\\ 


$$\Phi:=\exists y_1,\cdots, y_k \forall x_1,\cdots, x_m \left(c_1\vee\cdots\vee c_n \right)$$
%
Where $c_i$ is a conjunction of literals.\\

for each variable $z$, introduce a new variable $\pi(\neg z)$. Let $\pi(z)=z$.\\

introduce $U$.\\

for a clause $c=L_1\wedge\cdots\wedge L_s$, we write 
$\pi(c):=\pi(L_1)\wedge\cdots\wedge \pi(L_s)$





$$\begin{array}{ll}C:=&\{\pi(c_i)\rightarrow U\mid i=1,\cdots,n\}\cup\\ 
&\{\neg \pi(\neg x_j)\vee \neg x_j\mid j=1,\cdots,m\}\cup\\

&\{\neg \pi(\neg y_i)\vee \neg y_i\mid i=1,\cdots, k\}\cup\\
&\{y_i,\pi(\neg y_i)\mid i=1,\cdots,k\}\end{array}$$


$$\beta:= U\vee \left(\bigvee_{j=1}^k (\neg \pi(\neg x_j)\wedge \neg x_j)\right)$$


(Remark: using Tsting algorithm) \\

Let $$V:=\{U\}\cup\{x_1,\cdots,x_m\}$$

$(\exists K\subseteq C$ such that $K\equiv_V \beta)$ if and only if $\Phi$ is true.

\ \\

\ \\

Implication Problem

NP-complete  

Given a 3CNF  $F$

$$\bigwedge_{i=1}^m (L_{i,1}\vee L_{i,2}\vee L_{i,3}) \ \mbox{ over } x_1,\cdots, x_n$$

For each $i=1,\cdots,m$, pick a new variable $z_i$. For each $j=1,\cdots, n$ we pick a new variable $\pi(\neg x_j)$. For convenience, we also write $x_j$ as $\pi(x_j)$. 

Define $C$ 

$$\begin{array}{ll}C:=&
\bigcup_{i=1}^m\{\pi(L_{i,1})\rightarrow z_i, \pi(L_{i,2})\rightarrow z_i, \pi(L_{i,3})\rightarrow z_i\}\cup\\ & \bigcup_{j=1}^n\{\rightarrow x_j, \rightarrow \pi(\neg x_j\} \cup\\ &
\{z_1\wedge\cdots\wedge z_m\rightarrow z\}\end{array}$$

Define 

$$\beta:=z\wedge\bigwedge (\neg \pi(\neg x_j)\vee \neg x_j)$$


Impliation problem iff $F$ is satisfiable \\


\ \\


Specification Problem\\

Given a partial configuration $K$, demand $\beta$, a set of variables $V,W$

Looking for $\sigma$ over $W$ such that

\begin{enumerate}
\item $K\wedge \sigma(W)\equiv \beta$

\item $K\wedge\sigma(W) \equiv_V\beta$

\item $K\wedge\sigma(W)\models \beta$
\end{enumerate}


Query Learning 

black box $\alpha$   

equivalence query. Guess a $\beta$ ask whether $\alpha\equiv \beta$. If the answer is no, output a truth assignment satisfying $\alpha$ and $\neg \beta$ or satisfying $\neg\alpha$ and $\beta$.\\

membership query

guess a truth assignment $v$ answer $v(\alpha)=0$ or 1. \\





\section{Configuration with constraints}

$C=\{\alpha_1,\cdots, \alpha_n\}, \beta$,
$D$ is set of formulas over $A_1,\cdots, A_n$ which are propositional atoms.
Whether there is $K\subseteq C$ such that 
\begin{itemize}
\item $K$ is satisfiable,
\item $K\equiv\beta$, and
\item the truth assignment $v_K$ satisfies $D$, where $v_K(A_i)=\left\{\begin{array}{ll}
1 & \text{if } \alpha_i\in K\\ 0 & \text{if }\alpha_i\not\in K\end{array}\right.$  

\end{itemize}







\end{document}